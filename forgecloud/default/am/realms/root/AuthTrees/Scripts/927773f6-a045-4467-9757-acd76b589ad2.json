{
  "data": {
    "_id": "927773f6-a045-4467-9757-acd76b589ad2",
    "name": "SMS with Twilio",
    "description": "Custom script to send a One Time Passcode using Twilio. Account SID, auth key, and from phone need to be populated, and OTP messaging can be changed using this approach",
    "script": "LyoKICAtIERhdGEgbWFkZSBhdmFpbGFibGUgYnkgbm9kZXMgdGhhdCBoYXZlIGFscmVhZHkgZXhlY3V0ZWQgYXJlIGF2YWlsYWJsZSBpbiB0aGUgc2hhcmVkU3RhdGUgdmFyaWFibGUuCiAgLSBUaGUgc2NyaXB0IHNob3VsZCBzZXQgb3V0Y29tZSB0byBlaXRoZXIgInRydWUiIG9yICJmYWxzZSIuCiAqLwoKdmFyIGZyID0gbmV3IEphdmFJbXBvcnRlcigKICBvcmcuZm9yZ2Vyb2NrLmh0dHAucHJvdG9jb2wsCiAgb3JnLmZvcmdlcm9jay51dGlsLnByb21pc2UsCiAgb3JnLmZvcmdlcm9jay5vcGVuYW0uYXV0aC5ub2RlcywKICBvcmcuZm9yZ2Vyb2NrLmd1aWNlLmNvcmUKKTsKZnVuY3Rpb24gcG9zdFNNUygpIHsKICB3aXRoIChmcikgewogICAgdmFyIGFjY291bnQgPSAnQUNjNDY1ZjdmZjgzOWE1ZDUyZmVlYmY5MTMwOWNkODZhNSc7CiAgICB2YXIgYmFzaWNBdXRoS2V5ID0gJ1FVTmpORFkxWmpkbVpqZ3pPV0UxWkRVeVptVmxZbVk1TVRNd09XTmtPRFpoTlRveE5XVmtPV05qWkRoa05qRTBOakF5WWpZMFpUbGtZekk0T0RneU1HUXpaUT09JzsgLy9iYXNlNjQgZW5jb2Rpbmcgb2YgYWNjb3VudCBzaWQ6YXV0aCB0b2tlbiBmcm9tIHR3aWxpbwogICAgdmFyIGZyb21QaG9uZSA9ICcxNDI1OTQ3MjkwOSc7CiAgICB2YXIgaWRlbnRpdHlQcm92aWRlciA9IEluamVjdG9ySG9sZGVyLmdldEluc3RhbmNlKElkZW50aXR5UHJvdmlkZXIpOwogICAgdmFyIGlkZW50aXR5ID0gaWRlbnRpdHlQcm92aWRlci5nZXRJZGVudGl0eShzaGFyZWRTdGF0ZS5nZXQoJ3VzZXJuYW1lJyksIHNoYXJlZFN0YXRlLmdldCgncmVhbG0nKSk7CiAgICB2YXIgcGhvbmVOdW1iZXIgPSBpZGVudGl0eS5nZXRBdHRyaWJ1dGUoJ3RlbGVwaG9uZU51bWJlcicpOwogICAgbG9nZ2VyLmVycm9yKHBob25lTnVtYmVyKTsKICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoKTsKICAgIHJlcXVlc3QubWV0aG9kID0gJ1BPU1QnOwogICAgcmVxdWVzdC5zZXRVcmkoJ2h0dHBzOi8vYXBpLnR3aWxpby5jb20vMjAxMC0wNC0wMS9BY2NvdW50cy8nICsgYWNjb3VudCArICcvTWVzc2FnZXMuanNvbicpOwogICAgcmVxdWVzdC5nZXRIZWFkZXJzKCkuYWRkKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7CiAgICByZXF1ZXN0LmdldEhlYWRlcnMoKS5hZGQoJ0F1dGhvcml6YXRpb24nLCAnQmFzaWMgJyArIGJhc2ljQXV0aEtleSk7CiAgICB2YXIgYm9keSA9IHNoYXJlZFN0YXRlLmdldCgnb25lVGltZVBhc3N3b3JkJyk7CiAgICByZXF1ZXN0LnNldEVudGl0eSgnQm9keT1PbmUgdGltZSBwYXNzd29yZDogJyArIGJvZHkgKyAnJkZyb209KycgKyBmcm9tUGhvbmUgKyAnJlRvPSsnICsgcGhvbmVOdW1iZXIudG9BcnJheSgpWzBdKTsKICAgIHByb21pc2UgPSBodHRwQ2xpZW50LnNlbmQocmVxdWVzdCk7CiAgICB2YXIgcmVzcG9uc2UgPSBwcm9taXNlLmdldCgpOwogICAgbG9nZ2VyLm1lc3NhZ2UoJ1R3aWxpbyBDYWxsLiBTdGF0dXM6ICcgKyByZXNwb25zZS5nZXRTdGF0dXMoKSArICcsIENhdXNlOiAnICsgcmVzcG9uc2UuZ2V0Q2F1c2UoKSk7CiAgfQp9CnBvc3RTTVMoKTsKb3V0Y29tZSA9ICdvdXRjb21lJzs=",
    "default": false,
    "language": "JAVASCRIPT",
    "context": "AUTHENTICATION_TREE_DECISION_NODE",
    "createdBy": "null",
    "creationDate": 0,
    "lastModifiedBy": "null",
    "lastModifiedDate": 0
  },
  "metadata": {
    "realm": "/",
    "amsterVersion": "&{version}",
    "entityType": "Scripts",
    "entityId": "927773f6-a045-4467-9757-acd76b589ad2",
    "pathParams": {}
  }
}