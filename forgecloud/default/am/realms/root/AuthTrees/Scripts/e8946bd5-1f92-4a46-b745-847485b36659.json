{
  "data": {
    "_id": "e8946bd5-1f92-4a46-b745-847485b36659",
    "name": "Email with Sendgrid",
    "description": "Custom script to send a One Time Passcode using Sendgrid. Password needs to be populated, and OTP messaging can be changed using this approach",
    "script": "LyoKICAtIERhdGEgbWFkZSBhdmFpbGFibGUgYnkgbm9kZXMgdGhhdCBoYXZlIGFscmVhZHkgZXhlY3V0ZWQgYXJlIGF2YWlsYWJsZSBpbiB0aGUgc2hhcmVkU3RhdGUgdmFyaWFibGUuCiAgLSBUaGUgc2NyaXB0IHNob3VsZCBzZXQgb3V0Y29tZSB0byBlaXRoZXIgInRydWUiIG9yICJmYWxzZSIuCiAgLSBTYW1wbGUgY3VybCByZXF1ZXN0IGZyb20gc2VuZGdyaWQgYXBpIHRoaXMgc2NyaXB0IGlzIGJhc2VkIG9mZjoKICBodHRwczovL3NlbmRncmlkLmNvbS9kb2NzL2Zvci1kZXZlbG9wZXJzL3NlbmRpbmctZW1haWwvYXBpLWdldHRpbmctc3RhcnRlZC8KICBjdXJsIC0tcmVxdWVzdCBQT1NUIFwKLS11cmwgaHR0cHM6Ly9hcGkuc2VuZGdyaWQuY29tL3YzL21haWwvc2VuZCBcCi0taGVhZGVyICdhdXRob3JpemF0aW9uOiBCZWFyZXIgPDxZT1VSX0FQSV9LRVk+PicgXAotLWhlYWRlciAnY29udGVudC10eXBlOiBhcHBsaWNhdGlvbi9qc29uJyBcCi0tZGF0YSAneyJwZXJzb25hbGl6YXRpb25zIjpbeyJ0byI6W3siZW1haWwiOiJqb2huLmRvZUBleGFtcGxlLmNvbSIsIm5hbWUiOiJKb2huIERvZSJ9XSwic3ViamVjdCI6IkhlbGxvLCBXb3JsZCEifV0sImNvbnRlbnQiOiBbeyJ0eXBlIjogInRleHQvcGxhaW4iLCAidmFsdWUiOiAiSGV5YSEifV0sImZyb20iOnsiZW1haWwiOiJzYW0uc21pdGhAZXhhbXBsZS5jb20iLCJuYW1lIjoiU2FtIFNtaXRoIn0sInJlcGx5X3RvIjp7ImVtYWlsIjoic2FtLnNtaXRoQGV4YW1wbGUuY29tIiwibmFtZSI6IlNhbSBTbWl0aCJ9fScKICovCgp2YXIgZnIgPSBuZXcgSmF2YUltcG9ydGVyKAogIG9yZy5mb3JnZXJvY2suaHR0cC5wcm90b2NvbCwKICBvcmcuZm9yZ2Vyb2NrLnV0aWwucHJvbWlzZSwKICBvcmcuZm9yZ2Vyb2NrLm9wZW5hbS5hdXRoLm5vZGVzLAogIG9yZy5mb3JnZXJvY2suZ3VpY2UuY29yZQopOwpmdW5jdGlvbiBwb3N0RW1haWwoKSB7CiAgd2l0aCAoZnIpIHsKICAgIHZhciB1cmwgPSAnaHR0cHM6Ly9hcGkuc2VuZGdyaWQuY29tL3YzL21haWwvc2VuZCc7CiAgICB2YXIgYXBpS2V5ID0gJ1NFTkRHUklEX1BBU1NXT1JEJzsgLy9yZXBsYWNlIHdpdGggdGhlIHNlbmRncmlkIHBhc3N3b3JkCiAgICB2YXIgaWRlbnRpdHlQcm92aWRlciA9IEluamVjdG9ySG9sZGVyLmdldEluc3RhbmNlKElkZW50aXR5UHJvdmlkZXIpOwogICAgdmFyIGlkZW50aXR5ID0gaWRlbnRpdHlQcm92aWRlci5nZXRJZGVudGl0eShzaGFyZWRTdGF0ZS5nZXQoJ3VzZXJuYW1lJyksIHNoYXJlZFN0YXRlLmdldCgncmVhbG0nKSk7CiAgICB2YXIgZW1haWwgPSBpZGVudGl0eS5nZXRBdHRyaWJ1dGUoJ21haWwnKTsKICAgIHZhciBmcm9tRW1haWwgID0gJ25vcmVwbHlAbm9yZXBseS5jb20nOwogICAgdmFyIHN1YmplY3QgPSAiT3BlbkFtIE9uZSBUaW1lIFBhc3Njb2RlIjsKICAgIHZhciBib2R5ID0gIlRoZSBvbmUgdGltZSBwYXNzY29kZSB5b3UgcmVxdWVzdGVkIGlzOiAiOwogICAgCiAgICBsb2dnZXIuZXJyb3IoZW1haWwpOwogICAgdmFyIHJlcXVlc3QgPSBuZXcgUmVxdWVzdCgpOwogICAgcmVxdWVzdC5tZXRob2QgPSAnUE9TVCc7CiAgICByZXF1ZXN0LnNldFVyaSh1cmwpOwogICAgcmVxdWVzdC5nZXRIZWFkZXJzKCkuYWRkKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpOwogICAgcmVxdWVzdC5nZXRIZWFkZXJzKCkuYWRkKCdBdXRob3JpemF0aW9uJywgKCdCZWFyZXIgJyArIGFwaUtleSkpOwogICAgdmFyIG90cCA9IHNoYXJlZFN0YXRlLmdldCgnb25lVGltZVBhc3N3b3JkJyk7CiAgICB2YXIgZGF0YSA9IHsicGVyc29uYWxpemF0aW9ucyI6W3sidG8iOlt7ImVtYWlsIjogZW1haWwudG9BcnJheSgpWzBdIH1dLCJzdWJqZWN0Ijogc3ViamVjdCB9XSwiY29udGVudCI6IFt7InR5cGUiOiAidGV4dC9wbGFpbiIsICJ2YWx1ZSI6IChib2R5ICArIG90cCkgfV0sImZyb20iOnsiZW1haWwiOiBmcm9tRW1haWwgfSwicmVwbHlfdG8iOnsiZW1haWwiOiBmcm9tRW1haWwgfX07CiAgICBsb2dnZXIuZXJyb3IoZGF0YSk7CiAgICByZXF1ZXN0LnNldEVudGl0eShkYXRhKTsKICAgIHByb21pc2UgPSBodHRwQ2xpZW50LnNlbmQocmVxdWVzdCk7CiAgICB2YXIgcmVzcG9uc2UgPSBwcm9taXNlLmdldCgpOwogICAgbG9nZ2VyLm1lc3NhZ2UoJ1NlbmRncmlkIEVtYWlsLiBTdGF0dXM6ICcgKyByZXNwb25zZS5nZXRTdGF0dXMoKSArICcsIENhdXNlOiAnICsgcmVzcG9uc2UuZ2V0Q2F1c2UoKSk7CiAgfQp9CnBvc3RFbWFpbCgpOwpvdXRjb21lID0gJ291dGNvbWUnOw==",
    "default": false,
    "language": "JAVASCRIPT",
    "context": "AUTHENTICATION_TREE_DECISION_NODE",
    "createdBy": "null",
    "creationDate": 0,
    "lastModifiedBy": "null",
    "lastModifiedDate": 0
  },
  "metadata": {
    "realm": "/",
    "amsterVersion": "&{version}",
    "entityType": "Scripts",
    "entityId": "e8946bd5-1f92-4a46-b745-847485b36659",
    "pathParams": {}
  }
}