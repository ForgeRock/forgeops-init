{
  "data": {
    "_id": "e8946bd5-1f92-4a46-b745-847485b36659",
    "name": "Email with Sendgrid",
    "description": "Custom script to send a One Time Passcode using Sendgrid. Password needs to be populated, and OTP messaging can be changed using this approach",
    "script": "LyoKICAtIERhdGEgbWFkZSBhdmFpbGFibGUgYnkgbm9kZXMgdGhhdCBoYXZlIGFscmVhZHkgZXhlY3V0ZWQgYXJlIGF2YWlsYWJsZSBpbiB0aGUgc2hhcmVkU3RhdGUgdmFyaWFibGUuCiAgLSBUaGUgc2NyaXB0IHNob3VsZCBzZXQgb3V0Y29tZSB0byBlaXRoZXIgInRydWUiIG9yICJmYWxzZSIuCiAgLSBTYW1wbGUgY3VybCByZXF1ZXN0IGZyb20gc2VuZGdyaWQgYXBpIHRoaXMgc2NyaXB0IGlzIGJhc2VkIG9mZjoKICBodHRwczovL3NlbmRncmlkLmNvbS9kb2NzL2Zvci1kZXZlbG9wZXJzL3NlbmRpbmctZW1haWwvYXBpLWdldHRpbmctc3RhcnRlZC8KICBjdXJsIC0tcmVxdWVzdCBQT1NUIFwKLS11cmwgaHR0cHM6Ly9hcGkuc2VuZGdyaWQuY29tL3YzL21haWwvc2VuZCBcCi0taGVhZGVyICdhdXRob3JpemF0aW9uOiBCZWFyZXIgPDxZT1VSX0FQSV9LRVk+PicgXAotLWhlYWRlciAnY29udGVudC10eXBlOiBhcHBsaWNhdGlvbi9qc29uJyBcCi0tZGF0YSAneyJwZXJzb25hbGl6YXRpb25zIjpbeyJ0byI6W3siZW1haWwiOiJqb2huLmRvZUBleGFtcGxlLmNvbSIsIm5hbWUiOiJKb2huIERvZSJ9XSwic3ViamVjdCI6IkhlbGxvLCBXb3JsZCEifV0sImNvbnRlbnQiOiBbeyJ0eXBlIjogInRleHQvcGxhaW4iLCAidmFsdWUiOiAiSGV5YSEifV0sImZyb20iOnsiZW1haWwiOiJzYW0uc21pdGhAZXhhbXBsZS5jb20iLCJuYW1lIjoiU2FtIFNtaXRoIn0sInJlcGx5X3RvIjp7ImVtYWlsIjoic2FtLnNtaXRoQGV4YW1wbGUuY29tIiwibmFtZSI6IlNhbSBTbWl0aCJ9fScKICovCgp2YXIgZnIgPSBuZXcgSmF2YUltcG9ydGVyKAogIG9yZy5mb3JnZXJvY2suaHR0cC5wcm90b2NvbCwKICBvcmcuZm9yZ2Vyb2NrLnV0aWwucHJvbWlzZSwKICBvcmcuZm9yZ2Vyb2NrLm9wZW5hbS5hdXRoLm5vZGVzLAogIG9yZy5mb3JnZXJvY2suZ3VpY2UuY29yZQopOwpmdW5jdGlvbiBwb3N0RW1haWwoKSB7CiAgd2l0aCAoZnIpIHsKICAgIHZhciB1cmwgPSAnaHR0cHM6Ly9hcGkuc2VuZGdyaWQuY29tL3YzL21haWwvc2VuZCc7CiAgICB2YXIgYXBpS2V5ID0gJ1NFTkRHUklEX1BBU1NXT1JEJzsgLy9yZXBsYWNlIHdpdGggdGhlIHNlbmRncmlkIHBhc3N3b3JkCiAgICB2YXIgaWRlbnRpdHlQcm92aWRlciA9IEluamVjdG9ySG9sZGVyLmdldEluc3RhbmNlKElkZW50aXR5UHJvdmlkZXIpOwogICAgdmFyIGlkZW50aXR5ID0gaWRlbnRpdHlQcm92aWRlci5nZXRJZGVudGl0eShzaGFyZWRTdGF0ZS5nZXQoJ3VzZXJuYW1lJyksIHNoYXJlZFN0YXRlLmdldCgncmVhbG0nKSk7CiAgICB2YXIgZW1haWwgPSBpZGVudGl0eS5nZXRBdHRyaWJ1dGUoJ21haWwnKTsKICAgIHZhciBmcm9tRW1haWwgID0gJ25vcmVwbHlAZm9yZ2Vyb2NrLmNvbSc7CiAgICB2YXIgc3ViamVjdCA9ICJPbmUgVGltZSBQYXNzY29kZSI7CiAgICB2YXIgYm9keSA9ICJUaGUgb25lIHRpbWUgcGFzc2NvZGUgeW91IHJlcXVlc3RlZCBpczogIjsKICAgIAogICAgbG9nZ2VyLmVycm9yKGVtYWlsKTsKICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoKTsKICAgIHJlcXVlc3QubWV0aG9kID0gJ1BPU1QnOwogICAgcmVxdWVzdC5zZXRVcmkodXJsKTsKICAgIHJlcXVlc3QuZ2V0SGVhZGVycygpLmFkZCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTsKICAgIHJlcXVlc3QuZ2V0SGVhZGVycygpLmFkZCgnQXV0aG9yaXphdGlvbicsICgnQmVhcmVyICcgKyBhcGlLZXkpKTsKICAgIHZhciBvdHAgPSBzaGFyZWRTdGF0ZS5nZXQoJ29uZVRpbWVQYXNzd29yZCcpOwogICAgdmFyIGRhdGEgPSB7InBlcnNvbmFsaXphdGlvbnMiOlt7InRvIjpbeyJlbWFpbCI6IGVtYWlsLnRvQXJyYXkoKVswXSB9XSwic3ViamVjdCI6IHN1YmplY3QgfV0sImNvbnRlbnQiOiBbeyJ0eXBlIjogInRleHQvcGxhaW4iLCAidmFsdWUiOiAoYm9keSAgKyBvdHApIH1dLCJmcm9tIjp7ImVtYWlsIjogZnJvbUVtYWlsIH0sInJlcGx5X3RvIjp7ImVtYWlsIjogZnJvbUVtYWlsIH19OwogICAgbG9nZ2VyLmVycm9yKGRhdGEpOwogICAgcmVxdWVzdC5zZXRFbnRpdHkoZGF0YSk7CiAgICBwcm9taXNlID0gaHR0cENsaWVudC5zZW5kKHJlcXVlc3QpOwogICAgdmFyIHJlc3BvbnNlID0gcHJvbWlzZS5nZXQoKTsKICAgIGxvZ2dlci5tZXNzYWdlKCdTZW5kZ3JpZCBFbWFpbC4gU3RhdHVzOiAnICsgcmVzcG9uc2UuZ2V0U3RhdHVzKCkgKyAnLCBDYXVzZTogJyArIHJlc3BvbnNlLmdldENhdXNlKCkpOwogIH0KfQpwb3N0RW1haWwoKTsKb3V0Y29tZSA9ICdvdXRjb21lJzs=",
    "default": false,
    "language": "JAVASCRIPT",
    "context": "AUTHENTICATION_TREE_DECISION_NODE",
    "createdBy": "null",
    "creationDate": 0,
    "lastModifiedBy": "null",
    "lastModifiedDate": 0
  },
  "metadata": {
    "realm": "/",
    "amsterVersion": "&{version}",
    "entityType": "Scripts",
    "entityId": "e8946bd5-1f92-4a46-b745-847485b36659",
    "pathParams": {}
  }
}
